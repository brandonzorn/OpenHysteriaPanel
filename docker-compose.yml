services:
  hysteria:
    image: tobyxdd/hysteria
    container_name: hysteria
    restart: unless-stopped
    network_mode: "host"
    volumes:
      - ./hysteria/acme:/acme
      - ./hysteria/hysteria.yaml:/etc/hysteria.yaml
    command: ["server", "-c", "/etc/hysteria.yaml"]

  web-panel:
    build: .
    container_name: hysteria-web-panel
    restart: unless-stopped
    ports:
      - "8888:8888"
    env_file:
      - .env
    volumes:
      - ./hysteria/etc-panel/sqlite:/hystpanel/sqlite
    depends_on:
      - hysteria
volumes:
  acme: